{#
# GNU MediaGoblin -- federated, autonomous media hosting
# Copyright (C) 2011, 2012 MediaGoblin contributors.  See AUTHORS.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
-#}
{% extends "mediagoblin/base.html" %}

{% import "/mediagoblin/utils/wtforms.html" as wtforms_util %}
{% block mediagoblin_head %}
  {% include "dogma/parts/calendar_head.html"  %}
  <script type="text/javascript">
    // Put any text that need to be translated as a variable before the script that use it
    var info_several_choices = "{% trans %}There\'s several cities for this postal code, click to select : {%endtrans %}"
    var info_loading = "{% trans %}loading ...{% endtrans %}"
    var error_not_precise_enough = "{% trans %} The postal code is incorrect, or not precise enough (e.g : you can try 75007 instead of 75000) <a id='searchPlace'>Reload</a> {% endtrans %}"
    var error_no_country = "{% trans %}You need to select a country first !{% endtrans %}"
  </script>
  <script type="text/javascript" src="{{request.staticdirect('/dogma/js/ajax-postalcode-autocomplete/geonamesData.asc')}}"></script>
  <script type="text/javascript" src="{{request.staticdirect('/dogma/js/ajax-postalcode-autocomplete/jsr_class.js')}}"></script>
  <script type="text/javascript" src="{{request.staticdirect('/dogma/js/add_methods.js')}}"></script>
  <script type="text/javascript" src="http://api.geonames.org/export/geonamesData.js?username=dogmazic"></script>
{% endblock %}



{% block title -%}
  {% trans %}Add Members{% endtrans %} &mdash; {{ super() }}
{% endblock %}
{% block mediagoblin_content %}
  <h1>{% trans %}Add band members to{% endtrans %} "{{band.name}}"</h1>
  <div id="current_band_data">
      <div id="band_millis">{{band.millis}}</div>
      <div id="band_country">{{band.country}}</div>
      <div id="band_latitude">{{band.latitude}}</div>
      <div id="band_longitude">{{band.longitude}}</div>
      <div id="band_place">{{band.place}}</div>
  </div>
  <form enctype="multipart/form-data" method="post" action=""{{ request.urlgen('mediagoblin.plugins.dogma.add_band') }}">
    <div id="members" class="form_container">
      <div id="member_0" class="form_container">
            <h3>New Member</h3>
            {% set form_type="member" %}
            {% set number="_0" %}
            {% set copy=True %}
            {% include "dogma/parts/location_form.html" %}
            <div class="member_identity">
                {{ wtforms_util.render_field_div(member_form.member_username_0) }}
                {{ wtforms_util.render_field_div(member_form.member_real_name_0) }}
            </div>
            {{ wtforms_util.render_field_div(member_form.member_picture_0) }}
            {{ wtforms_util.render_field_div(member_form.member_description_0) }}
            {{ wtforms_util.render_field_div(member_form.member_since_0) }}
            {{ wtforms_util.render_field_div(member_form.member_former_0) }}
            {{ wtforms_util.render_field_div(member_form.member_until_0) }}
      </div>
      <button class="button_add_member button_action" type="button">+</button>
    </div>
    <div class="form_submit_buttons">
      {{ csrf_token }}
      <input type="submit" value="{% trans %}Just add the members{% endtrans %}" class="button_form" name="simple_submit"/>
      <input type="submit" value="{% trans %}Add and continue ( next : Album ){% endtrans %}" class="button_form continue" name="submit_and_continue"/>
    </div>
  </form>
{% endblock %}
